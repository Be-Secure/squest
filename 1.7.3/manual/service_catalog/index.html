
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.4.2">
    
    
      
        <title>Service catalog - Squest</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.69437709.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#4cae4f">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="green" data-md-color-accent="deep-orange">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lifecycle-management" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Squest" class="md-header__button md-logo" aria-label="Squest" data-md-component="logo">
      
  <img src="../../images/squest_logo_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Squest
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Service catalog
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/HewlettPackard/squest" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    HewlettPackard/squest
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Squest" class="md-nav__button md-logo" aria-label="Squest" data-md-component="logo">
      
  <img src="../../images/squest_logo_white.png" alt="logo">

    </a>
    Squest
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/HewlettPackard/squest" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    HewlettPackard/squest
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Installation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installation" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Installation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/ldap/" class="md-nav__link">
        LDAP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/tls/" class="md-nav__link">
        TLS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/backup/" class="md-nav__link">
        Backup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/upgrade/" class="md-nav__link">
        Upgrade
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Configuration" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Configuration
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/squest_settings/" class="md-nav__link">
        Squest
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/tower_settings/" class="md-nav__link">
        Tower
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Manual
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Manual" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Manual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Service catalog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Service catalog
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#concept" class="md-nav__link">
    Concept
  </a>
  
    <nav class="md-nav" aria-label="Concept">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provisioning-a-service" class="md-nav__link">
    Provisioning a service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#day-2-operations" class="md-nav__link">
    Day 2 operations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service" class="md-nav__link">
    Service
  </a>
  
    <nav class="md-nav" aria-label="Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#billing-group" class="md-nav__link">
    Billing group
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extra-vars" class="md-nav__link">
    Extra vars
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#external-support-url" class="md-nav__link">
    External support URL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operation" class="md-nav__link">
    Operation
  </a>
  
    <nav class="md-nav" aria-label="Operation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_1" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approval" class="md-nav__link">
    Approval
  </a>
  
    <nav class="md-nav" aria-label="Approval">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approval-workflow" class="md-nav__link">
    Approval Workflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approval-step" class="md-nav__link">
    Approval Step
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#survey" class="md-nav__link">
    Survey
  </a>
  
    <nav class="md-nav" aria-label="Survey">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabled-fields" class="md-nav__link">
    Enabled fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-value" class="md-nav__link">
    Default value
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../resource_tracking/" class="md-nav__link">
        Resource tracking
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tools/" class="md-nav__link">
        Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../quota/" class="md-nav__link">
        Quota
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../teams/" class="md-nav__link">
        Teams
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        REST API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../metrics/" class="md-nav__link">
        Prometheus metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../notifications/" class="md-nav__link">
        Notifications
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/dev-env/" class="md-nav__link">
        Setup a dev env
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/request-state-machine/" class="md-nav__link">
        Request state machine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/instance-state-machine/" class="md-nav__link">
        Instance state machine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/db-erd/" class="md-nav__link">
        Database ERD
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5_5" type="checkbox" id="__nav_5_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5_5">
          Plugins
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Plugins" data-md-level="2">
        <label class="md-nav__title" for="__nav_5_5">
          <span class="md-nav__icon md-icon"></span>
          Plugins
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/plugins/validators/" class="md-nav__link">
        Field validator
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Contribute
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contribute" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Contribute
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/code/" class="md-nav__link">
        Code
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/documentation/" class="md-nav__link">
        Documentation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#concept" class="md-nav__link">
    Concept
  </a>
  
    <nav class="md-nav" aria-label="Concept">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provisioning-a-service" class="md-nav__link">
    Provisioning a service
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#day-2-operations" class="md-nav__link">
    Day 2 operations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#service" class="md-nav__link">
    Service
  </a>
  
    <nav class="md-nav" aria-label="Service">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#billing-group" class="md-nav__link">
    Billing group
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extra-vars" class="md-nav__link">
    Extra vars
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#external-support-url" class="md-nav__link">
    External support URL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operation" class="md-nav__link">
    Operation
  </a>
  
    <nav class="md-nav" aria-label="Operation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_1" class="md-nav__link">
    Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approval" class="md-nav__link">
    Approval
  </a>
  
    <nav class="md-nav" aria-label="Approval">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approval-workflow" class="md-nav__link">
    Approval Workflow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approval-step" class="md-nav__link">
    Approval Step
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#survey" class="md-nav__link">
    Survey
  </a>
  
    <nav class="md-nav" aria-label="Survey">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enabled-fields" class="md-nav__link">
    Enabled fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#default-value" class="md-nav__link">
    Default value
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
  <a href="https://github.com/HewlettPackard/squest/edit/master/docs/manual/service_catalog.md" title="Edit this page" class="md-content__button md-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>



<h1 id="lifecycle-management">Lifecycle management</h1>
<h2 id="concept">Concept</h2>
<p>Once Squest is linked to a Tower/AWX server, "services" can be added into the catalog.</p>
<p>A service is composed of <code>operations</code> that are pointers to "job templates" present in Tower/AWX.</p>
<p>A service has at least one operation of type <code>CREATE</code> that allows to provision the resource.</p>
<p>A service can have then multiple operation of type <code>UPDATE</code> and <code>DELETE</code> that allow to manage the lifecycle of instances that have been created via the <code>CREATE</code> operation.</p>
<h3 id="provisioning-a-service">Provisioning a service</h3>
<p>When a user request for the first time a service, an instance is created automatically and set to "pending" state on Squest.
Once approved by the administrator, the request is sent to Tower to execute the linked job template.</p>
<p>The executed job, aka the Ansible playbook, need to call back the Squest API in order to attach information (spec) to the pending instance.</p>
<p>Squest provisioning workflow:
<div class="mermaid">sequenceDiagram
    participant User
    participant Admin
    participant Squest
    participant Tower
    User-&gt;&gt;Squest: Request service
    Admin-&gt;&gt;Squest: Approve
    Admin-&gt;&gt;Squest: Process
    Squest-&gt;&gt;Tower: Process
    Squest--&gt;&gt;Tower: Check
    Note right of Tower: Running
    Tower-&gt;&gt;Squest: Instance spec &lt;br&gt; {'uuid': 34, 'name': 'instance_name'}
    Squest--&gt;&gt;Tower: Check
    Note right of Tower: Successful    
    Squest-&gt;&gt;User: Notify service ready</div></p>
<p>The playbook will receive a <code>squest</code> extra variable that contains information of to the pending instance linked to the request
in addition to all extra variables which come from the survey of the job template.</p>
<p>Example of extra variables sent by Squest:
<div class="highlight"><pre><span></span><code><span class="nt">squest</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">squest_host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://squest.domain.local</span><span class="w"></span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test</span><span class="w"></span>
<span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">      </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">file_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo.conf</span><span class="w"></span>
<span class="w">      </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PROVISIONING</span><span class="w"></span>
<span class="w">      </span><span class="nt">spoc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
</code></pre></div></p>
<p>Specs related to the created instance are important in order to be sent later to a playbook in charge of updating
this particular instance.</p>
<p>Sent specs must contain unique IDs that allow to identify precisely the instance.
(E.g: <code>uuid</code> of a VMware VM, <code>namespace</code> and <code>cluster_api_url</code> for an Openshift project)</p>
<p><strong>Playbook example:</strong></p>
<p>In the example below, we've configured a job template with a survey that ask for a variable named <code>file_name</code>.
The playbook will:</p>
<ul>
<li>create the resource (the file)</li>
<li>call Squest api to link spec of the created resource to the instance</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a file</span><span class="w"></span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span><span class="w"></span>
<span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>

<span class="w">  </span><span class="nt">vars</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">squest_token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">48c67f9c2429f2d3a1ee0e47daa00ffeef4fe744</span><span class="w"></span>
<span class="w">    </span><span class="nt">squest_bearer_token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Bearer</span><span class="nv"> </span><span class="s">{{</span><span class="nv"> </span><span class="s">squest_token</span><span class="nv"> </span><span class="s">}}&quot;</span><span class="w"></span>
<span class="w">    </span><span class="nt">squest_api_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://192.168.58.128:8000/api/&quot;</span><span class="w"></span>

<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Print the job template survey variable</span><span class="w"></span>
<span class="w">      </span><span class="nt">debug</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">var</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">file_name</span><span class="w"></span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Print info sent by Squest</span><span class="w"></span>
<span class="w">      </span><span class="nt">debug</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">var</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">squest</span><span class="w"></span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create a file with the given file_name</span><span class="w"></span>
<span class="w">      </span><span class="nt">ansible.builtin.file</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/tmp/{{</span><span class="nv"> </span><span class="s">file_name</span><span class="nv"> </span><span class="s">}}&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">owner</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user</span><span class="w"></span>
<span class="w">        </span><span class="nt">group</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">user</span><span class="w"></span>
<span class="w">        </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;0644&#39;</span><span class="w"></span>
<span class="w">        </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">touch</span><span class="w"></span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Update spec of the instance via the squest API</span><span class="w"></span>
<span class="w">      </span><span class="nt">uri</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">squest_api_url</span><span class="nv"> </span><span class="s">}}service_catalog/instance/{{</span><span class="nv"> </span><span class="s">squest[&#39;request&#39;][&#39;instance&#39;][&#39;id&#39;]</span><span class="nv"> </span><span class="s">}}/&quot;</span><span class="w"> </span><span class="c1"># do not forget the last slash</span><span class="w"></span>
<span class="w">        </span><span class="nt">headers</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">Authorization</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">squest_bearer_token</span><span class="nv"> </span><span class="s">}}&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">method</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PATCH</span><span class="w"></span>
<span class="w">        </span><span class="nt">body</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">            </span><span class="nt">file_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">file_name</span><span class="nv"> </span><span class="s">}}&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">status_code</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200</span><span class="w"></span>
<span class="w">        </span><span class="nt">body_format</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">json</span><span class="w"></span>
</code></pre></div>
<h3 id="day-2-operations">Day 2 operations</h3>
<p>Day 2 operations are operations that <strong>update</strong> or <strong>delete</strong> existing resources.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, recent version of AWX/Tower drop extra variables that are not declared in the survey. To be able to receive Squest extra vars you need to enable "Prompt on Launch" in the "Variables" section of you job template. This correspond to the flag "ask_variables_on_launch" of the job_template model on the Tower/AWX API.</p>
</div>
<p>When a user creates a request for a day 2 operation of a provisioned instance, Squest automatically attach an <code>extra_vars</code> named <code>squest</code>
that contains the instance spec sent by the playbook used to provision at first the resource.</p>
<p>The playbook used to update the instance need to use info placed in <code>squest</code> variable to retrieve the real resource that need to be updated or deleted.
The update playbook can send a new version of the instance to squest at the end of its process if required.</p>
<div class="mermaid">sequenceDiagram
    participant User
    participant Admin
    participant Squest
    participant Tower
    User-&gt;&gt;Squest: Request update
    Admin-&gt;&gt;Squest: Approve
    Admin-&gt;&gt;Squest: Process
    Squest-&gt;&gt;Tower: Process - Extra vars:&lt;br&gt; {'squest': {'uuid': 34, 'name': 'instance_name'}}
    Squest--&gt;&gt;Tower: Check
    Note right of Tower: Running
    Tower-&gt;&gt;Squest: Instance spec update &lt;br&gt; {'uuid': 34, 'name': 'instance_new_name}
    Squest--&gt;&gt;Tower: Check
    Note right of Tower: Successful    
    Squest-&gt;&gt;User: Notify service updated</div>
<p><strong>Playbook example:</strong></p>
<p>Example of extra vars sent by squest:
<div class="highlight"><pre><span></span><code><span class="nt">squest</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">squest_host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://squest.domain.local</span><span class="w"></span>
<span class="w">  </span><span class="nt">request</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">instance</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test-instance</span><span class="w"></span>
<span class="w">      </span><span class="nt">service</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w"></span>
<span class="w">      </span><span class="nt">spec</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">file_name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">foo.conf</span><span class="w"></span>
<span class="w">      </span><span class="nt">spoc</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span><span class="w"></span>
<span class="w">      </span><span class="nt">state</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">UPDATING</span><span class="w"></span>
<span class="nt">string_to_place_in_file</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;this</span><span class="nv"> </span><span class="s">is</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">string&quot;</span><span class="w"></span>
</code></pre></div></p>
<p>In the example below, the update job template survey ask for a <code>string_to_place_in_file</code> variable.
The playbook receive as well all information that help to retrieve the resource to update. In this example the resource is the <code>file_name</code>.
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Update content of a file</span><span class="w"></span>
<span class="w">  </span><span class="nt">hosts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">localhost</span><span class="w"></span>
<span class="w">  </span><span class="nt">connection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span><span class="w"></span>
<span class="w">  </span><span class="nt">gather_facts</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>

<span class="w">  </span><span class="nt">tasks</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Print the job template survey variable</span><span class="w"></span>
<span class="w">      </span><span class="nt">debug</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">var</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string_to_place_in_file</span><span class="w"></span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Print info sent by Squest</span><span class="w"></span>
<span class="w">      </span><span class="nt">debug</span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">var</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">squest</span><span class="w"></span>

<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Add content into the file_name given by squest instance spec</span><span class="w"></span>
<span class="w">      </span><span class="nt">ansible.builtin.lineinfile </span><span class="p">:</span><span class="w"></span>
<span class="w">        </span><span class="nt">path</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/tmp/{{</span><span class="nv"> </span><span class="s">squest[&#39;request&#39;][&#39;instance&#39;][&#39;spec&#39;][&#39;file_name&#39;]</span><span class="nv"> </span><span class="s">}}&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">line</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{{</span><span class="nv"> </span><span class="s">string_to_place_in_file</span><span class="nv"> </span><span class="s">}}&quot;</span><span class="w"></span>
<span class="w">        </span><span class="nt">create</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">yes</span><span class="w"></span>
</code></pre></div></p>
<h2 id="service">Service</h2>
<h3 id="configuration">Configuration</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td>Short name of the service</td>
</tr>
<tr>
<td>Description</td>
<td>Small description of the operation</td>
</tr>
<tr>
<td>Image</td>
<td>Image used into the catalog</td>
</tr>
<tr>
<td>Billing</td>
<td>Define the billing behavior when requesting the service</td>
</tr>
<tr>
<td>Enabled</td>
<td>If set to <code>True</code> the service is visible in the catalog</td>
</tr>
<tr>
<td>External support URL</td>
<td>Define an external support  tool URL</td>
</tr>
<tr>
<td>Extra vars</td>
<td>Set of extra vars as JSON</td>
</tr>
</tbody>
</table>
<h3 id="billing-group">Billing group</h3>
<p>By default, Squest services are not linked to any billing group.</p>
<p>Administrators can configure how the billing of the service will be predefined.</p>
<p>Through the service form, choices are:</p>
<ul>
<li>Administrator defined billing group</li>
<li>User defined billing group:<ul>
<li>From his billing group</li>
<li>From all billing group</li>
</ul>
</li>
</ul>
<p><strong>Administrator defined billing group</strong></p>
<p>Administrators select a fixed billing group (can be none).
Each created instance will be linked to this billing group.</p>
<p>Administrators can also hide the billing from the end users.
The billing group will not be asked neither shown in the end user form when requesting the service.</p>
<p><strong>User defined billing group</strong></p>
<ul>
<li><strong>From his billing group:</strong> Administrators let the end user choose from his billing group when he sends an instance request.</li>
<li><strong>From all billing group:</strong> Administrators let the end user choose from all available billing group when he requests a service.</li>
</ul>
<h3 id="extra-vars">Extra vars</h3>
<p>Some extra variables can be declared on some Squest level like <code>tower_server</code>, <code>service</code> or <code>operation</code>.</p>
<p>These extra variables are added automatically when processing a request and so executing a job template.</p>
<p>If an extra variable is set with the same name in different places, the variable will be overridden following a certain order.
Squest will apply the following variable precedence:</p>
<div class="mermaid">flowchart LR
    survey(Request survey) --&gt; Tower(Tower) --&gt; Service(Service)  --&gt; Operation(Operation)</div>
<h3 id="external-support-url">External support URL</h3>
<p>Squest has an integrated support management. End user can open a support ticket on available instances.
An external url can be defined as support tool in each service configuration. This allows to configure for example a redirection to services like GitHub issues or Jira.</p>
<p>The external support URL support jinja templating to insert the current instance metadata as query parameters.</p>
<p>E.g:
<div class="highlight"><pre><span></span><code>http://my_external_tool.domain.local/?instance_name={{ instance.name }}?instance_id={{ instance.id }}?vm_os={{ instance.spec.vm_os }}
</code></pre></div></p>
<p>Example with <a href="https://docs.github.com/en/enterprise-server@3.1/issues/tracking-your-work-with-issues/creating-an-issue#creating-an-issue-from-a-url-query">Github issue query parameters</a>:
<div class="highlight"><pre><span></span><code>https://github.com/HewlettPackard/squest/issues/new?title=Templated+Github+issue&amp;body=Instance%3A+{{ instance.name }}
</code></pre></div></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Special characters need to be converted into a format that can be transmitted over the Internet. URLs can only be sent over the Internet using the ASCII character-set.</p>
</div>
<h2 id="operation">Operation</h2>
<h3 id="configuration_1">Configuration</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td>Short name of the operation</td>
</tr>
<tr>
<td>Description</td>
<td>Small description of the operation</td>
</tr>
<tr>
<td>Job template</td>
<td>Executed job template in the backend Tower/AWX server</td>
</tr>
<tr>
<td>Operation type</td>
<td>Type of operation (Create, update, delete). Change the state of he instance after executing the operation</td>
</tr>
<tr>
<td>Approval workflow</td>
<td>Define an optional <a href="#approval">approval workflow</a></td>
</tr>
<tr>
<td>Process timeout</td>
<td>Number of second to wait for a successful return from the executed job template</td>
</tr>
<tr>
<td>Auto accept</td>
<td>If set to <code>True</code> a submitted request for this operation will be automatically accepted</td>
</tr>
<tr>
<td>Auto process</td>
<td>If set to <code>True</code> an accepted request for this operation will be automatically processed</td>
</tr>
<tr>
<td>Enabled</td>
<td>If set to <code>True</code> the operation can be requested from the UI and API</td>
</tr>
<tr>
<td>Is admin operation</td>
<td>If set to <code>True</code> the operation is only visible and can be only requested by administrators</td>
</tr>
<tr>
<td>Extra vars</td>
<td>Set of extra vars as JSON</td>
</tr>
</tbody>
</table>
<h3 id="approval">Approval</h3>
<p>By default, <em>Requests</em> can be approved by any administrator when
<em>Approval Workflow</em> is not defined in the <em>Operation</em>. After being approved, the <em>Request</em> is in 'ACCEPTED' state and can be
processed.</p>
<h4 id="approval-workflow">Approval Workflow</h4>
<p>An <em>Approval Workflow</em> is composed by one or multiple <a href="#approval-step"><em>Approval Step</em></a>.
<em>Approval Steps</em> of the Workflow must be approved one by one following the order. After accepting the last one, the
request witch to 'ACCEPTED' state and can be processed.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The auto-accept option can not be set in the <em>Operation</em> with an Approval Workflow.</p>
</div>
<h4 id="approval-step">Approval Step</h4>
<p>An <em>Approval Step</em> can only be approved by its <em>Teams</em> members. It is approved when all <em>Teams</em> approved the <em>Request</em> or at
least one depending on the <a href="#type">Type</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Approval Steps are linked to Teams and not users. It means that any member can approved for his Team.</p>
</div>
<table>
<thead>
<tr>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Name</td>
<td>Unique identifier of the <em>Approval Step</em> in the <em>Approval Workflow</em>.</td>
</tr>
<tr>
<td>Type</td>
<td>Defined how the <em>Approval Step</em> is Approved. See supported types below</td>
</tr>
<tr>
<td>Teams</td>
<td>List of Teams that can approve the Approval Step.</td>
</tr>
</tbody>
</table>
<p><strong>Type</strong></p>
<ul>
<li><strong>At least one:</strong> At least one team must approve the <em>Approval Step</em> to move to the next one.</li>
<li><strong>All of them:</strong> All teams of the <em>Approval Step</em> must approve to move to the next one.</li>
</ul>
<h3 id="survey">Survey</h3>
<p>The survey of an operation can be edited to change the behavior of the generated form of a request.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Surveys in Squest are actually surveys attached to each job templates in your Tower/AWX.
Squest can only disable the ones that you don't want to be filled by your end users.
Those fields, if declared as mandatory on Tower/AWX, will need to be filled anyway by the admin when approving a request.</p>
</div>
<h4 id="enabled-fields">Enabled fields</h4>
<p>An <strong>enabled</strong> field is displayed into the end user survey.
By default, all fields are enabled when creating a new operation.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the field is set as <strong>required</strong> into the Tower/AWX job template survey config then the administrator
will have to fill it in any case during the review of the request.</p>
</div>
<h4 id="default-value">Default value</h4>
<p>When set, the default value is pre-filled into the final form. It takes precedence over the default value set in Tower/AWX job template survey config.</p>
<p>Default value precedence:</p>
<ol>
<li>Default from Tower/AWX</li>
<li>Default from Squest value</li>
<li>User's input</li>
<li>Admin's input</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When used with a 'multiple select' or 'multiple select multiple' type of field, the value need to be a valid one from the Tower/AWX survey field options.</p>
</div>
<p><strong>Hard coded string</strong></p>
<table>
    <tr>
        <td><strong>Instance JSON spec</strong></td>
        <td>
            <div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;os&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;linux&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;user_spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
        </td>
    </tr>
    <tr>
        <td><strong>Default config</strong></td>
        <td>My hard coded value</td>
    </tr>
    <tr>
        <td><strong>Result</strong></td>
        <td> My hard coded value </td>
    </tr>
</table>

<p><strong>With spec variable</strong></p>
<p>Jinja templating can be used to load a value with the content of the instance spec or user spec.
Use variables <code>spec</code> and/or <code>user_spec</code> like with Ansible.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>spec</code> and <code>user_spec</code> variables are only usable on <strong>Update</strong> or <strong>Delete</strong> operations as the pending instance does not contain any spec before its provisioning.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the given variable key doesn't exist, the default value will be set to an empty string.</p>
</div>
<table>
    <tr>
        <td><strong>Instance JSON spec</strong></td>
        <td>
            <div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;os&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;linux&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;user_spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
        </td>
    </tr>
    <tr>
        <td><strong>Default config</strong></td>
        <td> {{ spec.os }} </td>
    </tr>
    <tr>
        <td><strong>Result</strong></td>
        <td>linux</td>
    </tr>
</table>

<p><strong>String and spec variable</strong></p>
<p>Like with Ansible, a string can be concatenated to a spec variable.</p>
<table>
    <tr>
        <td><strong>Instance JSON spec</strong></td>
        <td>
            <div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;os&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;linux&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;user_spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
        </td>
    </tr>
    <tr>
        <td><strong>Default config</strong></td>
        <td>My hard coded value with {{ spec.os }}</td>
    </tr>
    <tr>
        <td><strong>Result</strong></td>
        <td>My hard coded value with linux</td>
    </tr>
</table>

<p><strong>Spec dict access</strong></p>
<table>
    <tr>
        <td><strong>Instance JSON spec</strong></td>
        <td>
            <div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;os&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nt">&quot;linux&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ubuntu&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;user_spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
        </td>
    </tr>
    <tr>
        <td><strong>Default config</strong></td>
        <td>{{ spec.os['linux'] }}</td>
    </tr>
    <tr>
        <td><strong>Result</strong></td>
        <td>ubuntu</td>
    </tr>
</table>

<p><strong>Spec list access</strong></p>
<table>
    <tr>
        <td><strong>Instance JSON spec</strong></td>
        <td>
            <div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;os&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;linux&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;windows&quot;</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;user_spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
        </td>
    </tr>
    <tr>
        <td><strong>Default config</strong></td>
        <td>{{ spec.os[1] }}</td>
    </tr>
    <tr>
        <td><strong>Result</strong></td>
        <td>windows</td>
    </tr>
</table>

<p><strong>Jinja filters</strong></p>
<p>Jinja filters can also be used to transform spec variables.</p>
<p>For example, the 'multiple select multiple' field type requires a list of string separated with a carriage return marker (<code>\n</code>).</p>
<table>
    <tr>
        <td><strong>Instance JSON spec</strong></td>
        <td>
            <div class="highlight"><pre><span></span><code><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nt">&quot;os&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;linux&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;windows&quot;</span><span class="p">]</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="nt">&quot;user_spec&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
        </td>
    </tr>
    <tr>
        <td><strong>Default config</strong></td>
        <td>{{ spec.os | join('\n') }}</td>
    </tr>
    <tr>
        <td><strong>Result</strong></td>
        <td>linux\nwindows</td>
    </tr>
</table>




              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../../configuration/tower_settings/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Tower" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Tower
            </div>
          </div>
        </a>
      
      
        
        <a href="../resource_tracking/" class="md-footer__link md-footer__link--next" aria-label="Next: Resource tracking" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Resource tracking
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.9c69f0bc.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.9.2/mermaid.min.js"></script>
      
    
  </body>
</html>